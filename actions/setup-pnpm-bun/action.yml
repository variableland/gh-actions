name: setup-pnpm-bun

description: Prepare PNPM and Bun, cache dependencies, and install dependencies

runs:
  using: composite

  steps:
    - name: 📦 Setup PNPM
      uses: variableland/gh-actions/actions/setup-pnpm

    - name: 🔍 .bun-version
      shell: bash
      run: |
        if [ ! -f ".bun-version" ]; then
          echo "❌ Error: .bun-version file not found. This file is required to configure the correct version of Bun."
          exit 1
        fi

    - name: 🥟 Setup Bun
      uses: oven-sh/setup-bun@v2
      with:
        bun-version-file: ".bun-version"
